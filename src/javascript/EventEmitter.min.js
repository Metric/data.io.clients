var EventEmitter=function(){};EventEmitter.prototype.listeners={},EventEmitter.prototype.on=function(t,e){var r=this.listeners[t];if(r){var n={type:0,fn:e};r.push(n)}else{r=[];var n={type:0,fn:e};r.push(n),this.listeners[t]=r}return this},EventEmitter.prototype.once=function(t,e){var r=this.listeners[t];if(r){var n={type:1,fn:e};r.push(n)}else{r=[];var n={type:1,fn:e};r.push(n),this.listeners[t]=r}return this},EventEmitter.prototype.emit=function(t){var e=[],r=this;arguments.length>1&&(e=Array.prototype.slice.call(arguments,1,arguments.length));var n=this.listeners[t];if(n){for(var s=[],i=0;i<n.length;i++){var p=n[i];p.fn.apply(r,e),1==p.type&&s.push(p)}for(var i=0;i<s.length;i++){var p=s[i];n.splice(n.indexOf(p),1)}}return this};